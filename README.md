استيراد من الخادم - WordPress Plugin
====================================

* المساهمون: brmgina
* العلامات: admin, media, uploads, post, import, files, server, ftp
* يتطلب على الأقل: 6.0
* تم اختباره حتى: 6.4
* يتطلب PHP: 8.0
* الإصدار المستقر: 1.0.0
* تاريخ الإصدار: 2025-01-27

## 🚀 نظرة عامة

**استيراد من الخادم** هي إضافة ووردبريس جديدة ومتطورة تم تطويرها لحل مشاكل الاستضافة السيئة وقيود رفع الملفات. تسمح هذه الإضافة للمستخدمين برفع الملفات الكبيرة عبر FTP أو SSH ثم استيرادها بسهولة إلى مكتبة الوسائط في ووردبريس.

## ✨ الميزات الرئيسية

### 🔒 **الأمان المتقدم**
- حماية شاملة من هجمات directory traversal
- التحقق الفعلي من نوع MIME للملفات باستخدام finfo
- حماية من CSRF attacks
- تنظيف شامل للمدخلات
- تسجيل مفصل للأخطاء والعمليات

### 📁 **إدارة ذكية للملفات**
- واجهة مستخدم حديثة وسهلة الاستخدام
- استكشاف شجري للمجلدات مع إمكانية التنقل
- عرض قائمة الملفات مع إمكانية التحديد المتعدد
- دعم الملفات الكبيرة التي تتجاوز حدود الاستضافة
- استخراج تلقائي للبيانات الوصفية

### ⚡ **الأداء المحسن**
- معالجة محسنة للملفات والمجلدات
- دعم كامل لـ PHP 8.0+ للأداء الأمثل
- معالجة ذكية للتواريخ (دائماً اليوم أو الأول من الشهر)
- دعم المجلدات الجذرية القابلة للتخصيص

## 🎯 الاستخدام المقصود

### ✅ هذه الإضافة مصممة لـ:
- استيراد الملفات الكبيرة التي تتجاوز حدود الاستضافة
- استيراد الملفات التي تكون كبيرة جداً لسرعة اتصال الإنترنت
- حل مشاكل قيود الاستضافة السيئة
- استيراد ملفات من مجلدات محددة على الخادم

### ❌ هذه الإضافة ليست مصممة لـ:
- أن تستخدم كبديل لرفع الملفات العادي
- ترحيل المواقع الإلكترونية
- إعادة استيراد ملفات بعد نقل الاستضافة
- استيراد الوسائط بشكل جماعي

## 📦 التثبيت

### الطريقة الأولى: التثبيت اليدوي
1. انسخ جميع ملفات الإضافة إلى مجلد `wp-content/plugins/get-from-server/`
2. فعّل الإضافة من لوحة التحكم (Plugins → Installed Plugins)
3. اذهب إلى Media → Get From Server

### الطريقة الثانية: عبر FTP
1. ارفع مجلد الإضافة عبر FTP إلى `wp-content/plugins/`
2. فعّل الإضافة من لوحة التحكم
3. ابدأ باستخدام الإضافة

## ⚙️ الإعدادات

### تحديد المجلد الجذر
يمكنك تخصيص المجلدات التي يمكن استيراد الملفات منها عن طريق إضافة الثابت `GET_FROM_SERVER` إلى ملف `wp-config.php`:

```php
// في wp-config.php
define( 'GET_FROM_SERVER', '/www/' );
// أو
define( 'GET_FROM_SERVER', '/home/user/public_html/' );
```

### الصلاحيات المطلوبة
- `upload_files` - لاستخدام الإضافة
- `unfiltered_upload` - لرفع أنواع ملفات غير مدعومة

## 🔧 الملفات المكونة للإضافة

### الملفات الأساسية
- `get-from-server.php` - الملف الرئيسي للإضافة
- `class.get-from-server.php` - الكلاس الرئيسي مع جميع الميزات الأمنية
- `compat.php` - دعم التوافق مع PHP 8

### ملفات الواجهة
- `get-from-server.js` - JavaScript للتفاعل والواجهة
- `get-from-server.css` - تنسيقات CSS الحديثة

### ملفات التوثيق
- `SECURITY_IMPROVEMENTS.md` - تفاصيل شاملة للميزات الأمنية
- `IMPROVEMENTS_SUMMARY.md` - ملخص جميع التحسينات
- `security_test.php` - ملف اختبار الأمان (اختياري)

## 🛡️ الميزات الأمنية التفصيلية

### 1. حماية من Directory Traversal
- تحقق شامل من المسار قبل حفظه
- منع التلاعب بـ cookie للوصول لمجلدات غير مصرح بها
- تنظيف شامل لجميع المدخلات

### 2. التحقق من نوع MIME
- استخدام `finfo` للتحقق من نوع الملف الفعلي
- رفض الملفات التي لا يتطابق نوعها مع امتدادها
- حماية من رفع ملفات ضارة

### 3. معالجة محسنة للأخطاء
- إزالة `@` من عمليات النسخ لرؤية الأخطاء
- تسجيل مفصل للأخطاء في error log
- رسائل خطأ واضحة للمستخدم

### 4. حماية إضافية
- تحقق شامل من صلاحيات المستخدم
- حماية من CSRF attacks
- تنظيف شامل للمدخلات

## 📖 دليل الاستخدام

### الخطوة 1: رفع الملفات
استخدم FTP أو SSH لرفع الملفات المطلوبة إلى الخادم في المجلد المحدد.

### الخطوة 2: الوصول للإضافة
1. اذهب إلى لوحة التحكم
2. اختر Media → Get From Server
3. ستظهر واجهة الإضافة

### الخطوة 3: التنقل والاختيار
1. استخدم الروابط للتنقل بين المجلدات
2. حدد الملفات المراد استيرادها
3. تأكد من أن الملفات صالحة (بدون خلفية حمراء)

### الخطوة 4: الاستيراد
1. اضغط على زر "Import" لاستيراد الملفات المحددة
2. انتظر حتى اكتمال العملية
3. تحقق من مكتبة الوسائط

## 🔍 مراقبة الأداء

### مراقبة السجلات
```bash
# مراقبة سجلات الأخطاء
tail -f /var/log/error.log | grep "Get From Server"

# مراقبة سجلات الوصول
tail -f /var/log/access.log | grep "get-from-server"
```

### إعدادات الخادم الموصى بها
```apache
# في ملف .htaccess
<Files "*.php">
    Order Deny,Allow
    Deny from all
</Files>

# السماح فقط بملفات الإضافة
<Files "get-from-server.php">
    Order Allow,Deny
    Allow from all
</Files>
```

## ❓ الأسئلة الشائعة

### Q: كيف يمكنني استيراد ملفات من مجلدات أخرى؟
A: يمكنك تخصيص المجلدات عن طريق إضافة `define( 'GET_FROM_SERVER', '/path/to/folder/' );` في ملف `wp-config.php`.

### Q: لماذا الملف الذي أريد استيراده له خلفية حمراء؟
A: ووردبريس يسمح فقط بأنواع معينة من الملفات لأسباب أمنية. يمكنك استخدام إضافة مثل `pjw-mime-config` لإضافة أنواع ملفات إضافية.

### Q: أين يتم حفظ الملفات المستوردة؟
A: إذا كان الملف خارج مجلد الرفع القياسي، سيتم نسخه إلى مجلد الرفع الحالي. إذا كان موجوداً بالفعل داخل مجلد الرفع، سيتم استخدامه كما هو.

### Q: ما هي متطلبات النظام؟
A: تتطلب الإضافة ووردبريس 6.0+ و PHP 8.0+ للأداء الأمثل.

## 🔧 التوافق

- **WordPress**: 6.0 - 6.4+
- **PHP**: 8.0+
- **المتصفحات**: Chrome, Firefox, Safari, Edge (الإصدارات الحديثة)
- **الخوادم**: Apache, Nginx

## 📞 الدعم والمساعدة

### الإبلاغ عن الأخطاء
- **واتساب**: [واتساب برمجينا](https://wa.me/201556000180)
- **GitHub**: [مستودع GitHub](https://github.com/Brmgina/get-from-server/)

### طلبات الميزات
نرحب بجميع الاقتراحات والطلبات عبر قنوات الدعم المذكورة أعلاه.

## 📄 الترخيص

هذه الإضافة مطورة بواسطة **Eng. A7meD KaMeL** من فريق **برمجينا**.

## ⚠️ ملاحظات مهمة

### قبل الاستخدام
1. **النسخ الاحتياطية**: احتفظ بنسخ احتياطية كاملة للموقع
2. **الاختبار**: اختبر الإضافة في بيئة تطوير أولاً
3. **الصلاحيات**: تأكد من الصلاحيات المناسبة فقط
4. **المراقبة**: راقب السجلات بانتظام

### أفضل الممارسات
- استخدم الإضافة فقط عند الحاجة الفعلية
- تأكد من أمان الملفات قبل الاستيراد
- راقب استخدام مساحة التخزين
- احتفظ بسجلات العمليات

## 📈 خطة التطوير المستقبلية

- دعم الملفات المضغوطة (ZIP, RAR)
- واجهة مستخدم محسنة أكثر
- دعم السحب والإفلات
- معاينة الملفات قبل الاستيراد
- دعم المزامنة التلقائية

---

**الإصدار**: 1.0.0  
**تاريخ الإصدار**: 27 يناير 2025  
**المطور**: Eng. A7meD KaMeL - برمجينا
